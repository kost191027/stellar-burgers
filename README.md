# Отчёт по проделанной работе над проектом «Stellar Burgers»

## 1. Краткое описание проекта

«Stellar Burgers» — учебный React‑проект, в котором реализуется конструктор бургеров с возможностью собирать заказ из ингредиентов, оформлять его и отслеживать в ленте заказов. Проект служит полигоном для отработки следующих навыков:

- работа с TypeScript в React‑приложении;
- организация архитектуры фронтенд‑проекта (страницы, UI‑компоненты, слои данных);
- настройка Webpack, Storybook и линтинга;
- интеграция с REST API, авторизация и работа с токенами;
- подготовка к использованию Redux Toolkit и React Router.

## 2. Цели этапа

На данном этапе работы над проектом были поставлены следующие задачи:

1. Настроить окружение и базовую инфраструктуру проекта (Webpack, TypeScript, ESLint, Prettier, Storybook).
2. Спроектировать архитектуру приложения, слои страниц и переиспользуемых компонентов.
3. Подготовить маршрутизацию и заготовки страниц приложения.
4. Реализовать слой работы с API (ингредиенты, заказы, авторизация, профиль пользователя).
5. Подготовить инфраструктуру для дальнейшей интеграции Redux Toolkit (store, типизированные хуки, слои `slices` и `selectors`).

## 3. Выполненные работы

### 3.1. Настройка окружения и инструментов

- Настроен TypeScript и базовая типизация проекта (`tsconfig.json`).
- Настроен Webpack для сборки приложения:
  - точка входа `src/index.tsx`;
  - сборка TypeScript и JSX через `ts-loader`/Babel;
  - поддержка CSS и CSS‑модулей;
  - подключение `dotenv-webpack` для работы с переменными окружения.
- Настроен Storybook 7 для документирования и визуального тестирования UI‑компонентов.
- Подключены и настроены инструменты качества кода:
  - ESLint (включая правила для React, хуков, Storybook);
  - Prettier для автоформатирования кода.
- Добавлены npm‑скрипты для типичных задач разработки:
  - запуск dev‑сервера (`webpack-dev-server`);
  - запуск Storybook;
  - линтинг и автоисправление ошибок линтера;
  - автоформатирование исходников.

### 3.2. Архитектура и структура приложения

- Определена структура каталогов в `src/`:
  - `components` — контейнерные и логические компоненты (конструктор, лента заказов, шапка приложения, модальные окна и др.);
  - `components/ui` — презентационные (чистые) UI‑компоненты с CSS‑модулями и типами пропсов;
  - `components/ui/pages` — UI‑слой для отдельных страниц (layout + компоненты);
  - `pages` — контейнеры страниц, ответственные за навигацию, побочные эффекты и интеграцию с хранилищем;
  - `services` — инфраструктура для Redux (`store`, будущие `slices` и `selectors`);
  - `utils` — утилиты, типы и слой API.
- Настроены удобные алиасы импортов (например, `@pages`, `@components`, `@ui`, `@ui-pages`, `@utils-types`, `@api`), что упрощает навигацию и уменьшает глубину относительных путей.

### 3.3. Входная точка и каркас приложения

- В `src/index.tsx` создан корневой React‑корень (`ReactDOM.createRoot`) и отрисовка приложения внутри `React.StrictMode`.
- Реализован компонент‑оболочка `App`, который подключает глобальные стили (`src/index.css`) и формирует общий layout:
  - шапка приложения (`AppHeader`);
  - основная область контента с текущей страницей конструктора.

### 3.4. UI‑слой и страницы

- Создан набор переиспользуемых UI‑компонентов:
  - элементы конструктора бургера (список ингредиентов, конструктор, карточки, модалки с деталями ингредиента и заказа);
  - компоненты для работы с заказами (карточка заказа, статус, лента заказов, сводная информация по заказам);
  - компоненты навигации и layout (шапка, меню профиля и др.).
- Реализованы UI‑версии страниц (в `src/components/ui/pages`):
  - конструктор (`ConstructorPageUI`);
  - лента заказов (`FeedUI`);
  - профиль пользователя (`ProfileUI`) и заказы профиля (`ProfileOrdersUI`);
  - страницы авторизации (`LoginUI`, `RegisterUI`);
  - страницы восстановления пароля (`ForgotPasswordUI`, `ResetPasswordUI`);
  - страница 404.
- Страницы‑контейнеры в `src/pages` инкапсулируют навигацию и будущую работу с состоянием приложения, при этом делегируя разметку UI‑слою.

### 3.5. Работа с API и доменными типами

- В `src/utils/types.ts` описаны ключевые доменные типы:
  - ингредиенты, заказы, пользователь, данные ленты заказов и др.;
  - типы используются в компонентах и API‑слое для строгой типизации.
- В `src/utils/burger-api.ts` реализован слой доступа к API:
  - обёртка над `fetch` с проверкой ответа и универсальным парсингом JSON;
  - запросы за ингредиентами, лентой заказов и детальной информацией по заказу;
  - запросы на регистрацию, логин, выход из системы;
  - запросы для восстановления пароля и работы с профилем пользователя (получение и обновление данных).
- Реализована базовая инфраструктура работы с токенами доступа и рефреш‑токенами (через `localStorage` и cookie).

### 3.6. Подготовка Redux‑инфраструктуры

- Настроен глобальный `store` в `src/services/store.ts` на базе Redux Toolkit с поддержкой DevTools в режиме разработки.
- Добавлены и типизированы хуки `useDispatch` и `useSelector` для удобной работы с хранилищем.
- Подготовлены директории `@slices` и `@selectors` под будущие слайсы состояния и селекторы.
- В страницах добавлены `TODO`‑комментарии в точках, где в дальнейших итерациях будет подключаться Redux‑состояние (ингредиенты, заказы, пользователь, статусы загрузки и т.п.).

### 3.7. Маршрутизация и навигация

- В проект подключён `react-router-dom` v6.
- В страницах, связанных с авторизацией и восстановлением пароля, используется `useNavigate` для программной навигации.
- Подготовлены компоненты страниц, которые будут далее подключены к верхнеуровневому роутеру (например, `/`, `/feed`, `/login`, `/register`, `/profile`, `/profile/orders`, `/forgot-password`, `/reset-password`, `/orders/:id`).

### 3.8. Инфраструктура для разработки и документации UI

- Настроен Storybook с поддержкой TypeScript и алиасов импортов, что позволяет:
  - запускать изолированные сторис для UI‑компонентов;
  - документировать состояния и сценарии использования компонентов;
  - быстрее отлаживать верстку и поведение без поднятия всего приложения.
- Для сторис настроен декоратор с `BrowserRouter`, чтобы компоненты, использующие роутер, корректно работали в Storybook.

## 4. Невыполненные задачи и планы на следующие итерации

Часть задач запланирована на будущие этапы разработки:

- Реализация полноценного корневого роутера (`BrowserRouter` + `Routes`) в `App` с подключением всех страниц.
- Создание Redux‑слайсов и селекторов для:
  - ингредиентов и конструктора бургера;
  - ленты заказов и заказов пользователя;
  - авторизации и профиля пользователя.
- Интеграция страниц с глобальным состоянием приложения (загрузка данных, обработка ошибок, отображение спиннеров и т.п.).
- Добавление защищённых роутов для страниц профиля и заказов пользователя.
- Настройка и написание тестов (юнит‑тесты, компонентные тесты с Testing Library, e2e‑тесты с Cypress).

## 5. Как запустить и использовать проект

### 5.1. Переменные окружения

Для корректной работы запросов к серверу необходимо создать файл `.env` в корне проекта и указать переменную окружения:

```bash path=null start=null
BURGER_API_URL=https://norma.education-services.ru/api
```

Актуальное значение можно взять из файла `.env.example`.

### 5.2. Основные команды

Запуск dev‑сервера (Webpack Dev Server, режим разработки):

```bash path=null start=null
npm run start
```

Запуск Storybook для просмотра и разработки UI‑компонентов:

```bash path=null start=null
npm run storybook
```

Сборка статической версии Storybook (например, для публикации документации):

```bash path=null start=null
npm run build-storybook
```

Проверка кода линтером:

```bash path=null start=null
npm run lint
```

Автоисправление возможных ошибок линтера:

```bash path=null start=null
npm run lint:fix
```

Автоформатирование исходников с помощью Prettier:

```bash path=null start=null
npm run format
```

## 6. Итоги

На текущем этапе сформирован прочный фундамент фронтенд‑части проекта «Stellar Burgers»:

- настроено окружение и инструменты разработки;
- определена архитектура приложения и слои (страницы, UI‑компоненты, слой данных);
- реализован слой API и доменные типы;
- подготовлена инфраструктура для роутинга и Redux Toolkit;
- настроен Storybook для удобной разработки и документирования компонентов.

Следующие итерации будут сфокусированы на подключении Redux‑состояния, реализации бизнес‑логики (конструктор, оформление и отслеживание заказов), полноценной авторизации и покрытии проекта тестами.
